{% extends "layout.html" %}

{% block extra_css %}{% endblock %}

{% block content %}
<div class="row game-screen" style="display: none;">
    <div class="col-md-4">
        <!-- 角色区域 -->
        <div class="character-container">
            <img src="{{ url_for('static', filename='images/su_tang.png') }}" alt="苏糖" class="character-image" id="character-image">
            <div class="text-center mt-2"><span id="character-name" class="fw-bold">苏糖</span></div>
        </div>
        
        <!-- 状态信息区域 -->
        <div class="status-container">
            <h4>角色信息</h4>
            <div class="mb-2">
                <label for="affection-bar" class="form-label">好感度: <span id="affection-value">30</span></label>
                <div class="progress">
                    <div id="affection-bar" class="progress-bar bg-danger" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            
            <div class="row mb-1">
                <div class="col-4">关系:</div>
                <div class="col-8" id="relationship-status">初始阶段</div>
            </div>
            
            <div class="row mb-1">
                <div class="col-4">场景:</div>
                <div class="col-8" id="scene-info">学校 - 百团大战</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-8">
        <!-- 聊天和输入区域包装 -->
        <div class="chat-section">
            <!-- 对话区域 -->
            <div class="chat-container" id="chat-history">
                <!-- 对话内容将通过JS动态添加 -->
            </div>
            
            <!-- 输入区域 -->
            <div class="chat-input-container">
                <div class="input-group">
                    <input type="text" id="user-input" class="form-control" placeholder="输入你想说的话...">
                    <button class="btn btn-primary" id="send-button">发送</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 欢迎页面 -->
<div class="welcome-screen" id="welcome-screen">
    <h2>欢迎来到绿园中学物语</h2>
    <p class="lead">选择角色后开始你的校园故事</p>

    <img id="role-preview-image" src="{{ url_for('static', filename='images/su_tang.png') }}" alt="角色预览" class="mb-3" style="max-height: 300px;">

    <div class="mb-3">
        <label for="role-select" class="form-label">选择角色</label>
        <select id="role-select" class="form-select" style="max-width: 260px; margin: 0 auto;">
            <option value="su_tang" selected>苏糖</option>
            <option value="lin_yuhan">林雨含</option>
            <option value="luo_yimo">罗一莫</option>
            <option value="gu_pan">顾盼</option>
            <option value="xia_xingwan">夏星晚</option>
        </select>
        <div id="role-brief" class="small text-muted mt-2" style="max-width: 420px; margin: 8px auto 0;">
            在烘焙社摊位前的温柔女孩；甜点与音乐是她的安全感。
        </div>
    </div>

    <div>
        <button id="start-game" class="btn btn-success game-button">开始游戏</button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // 游戏主要JavaScript将通过单独的JS文件加载
</script>
{% endblock %}
